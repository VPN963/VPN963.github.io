<!DOCTYPE html>
<html lang="fa" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø±Ù…Ø²Ú¯Ø°Ø§Ø± Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
  <style>
    :root {
      --bg: #ffffff;
      --card-bg: #f9f9f9;
      --text: #222222;
      --btn: #4361ee;
      --btn-hover: #3a56d4;
      --success: #4caf50;
      --error: #f44336;
      --border: #ddd;
      --shadow: rgba(0,0,0,0.08);
    }

    [data-theme="dark"] {
      --bg: #121212;
      --card-bg: #1e1e1e;
      --text: #f0f0f0;
      --border: #333;
      --shadow: rgba(0,0,0,0.3);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
      background: var(--card-bg);
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 6px 20px var(--shadow);
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: 700;
      font-size: 28px;
      color: var(--btn);
    }

    .theme-toggle {
      position: absolute;
      top: 20px;
      left: 20px;
      background: var(--btn);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 16px;
    }

    textarea {
      width: 100%;
      height: 130px;
      padding: 14px;
      font-size: 16px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--bg);
      color: var(--text);
      margin: 10px 0;
      resize: vertical;
      direction: ltr;
    }

    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 15px 0;
    }

    button {
      padding: 12px 20px;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .btn-encode {
      background: var(--btn);
      color: white;
    }

    .btn-decode {
      background: #f72585;
      color: white;
    }

    .btn-copy {
      background: #4caf50;
      color: white;
      margin-top: 5px;
    }

    button:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }

    button:active {
      transform: translateY(0);
    }

    .output-container {
      position: relative;
    }

    .copy-feedback {
      position: absolute;
      top: -30px;
      right: 0;
      background: var(--success);
      color: white;
      padding: 5px 12px;
      border-radius: 6px;
      font-size: 14px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .copy-feedback.show {
      opacity: 1;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }
      button {
        padding: 10px 16px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>

  <div class="container">
    <h1>Ø±Ù…Ø²Ú¯Ø°Ø§Ø± Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h1>

    <label for="input">Ù…ØªÙ† ÛŒØ§ Ø§ÛŒÙ…ÙˆØ¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒ:</label>
    <textarea id="input" placeholder="Ù…Ø«Ù„Ø§Ù‹: Hello123! ÛŒØ§ ğŸ‘‹ğŸ¤“ğŸ”¢..."></textarea>

    <div class="btn-group">
      <button class="btn-encode" onclick="encodeToEmoji()">ğŸ” Ù…ØªÙ† â†’ Ø§ÛŒÙ…ÙˆØ¬ÛŒ</button>
      <button class="btn-decode" onclick="decodeFromEmoji()">ğŸ”“ Ø§ÛŒÙ…ÙˆØ¬ÛŒ â†’ Ù…ØªÙ†</button>
    </div>

    <label for="output">Ø®Ø±ÙˆØ¬ÛŒ:</label>
    <div class="output-container">
      <textarea id="output" readonly></textarea>
      <div class="copy-feedback" id="copyFeedback">Ú©Ù¾ÛŒ Ø´Ø¯!</div>
      <button class="btn-copy" onclick="copyToClipboard()">ğŸ“‹ Ú©Ù¾ÛŒ Ø®Ø±ÙˆØ¬ÛŒ</button>
    </div>
  </div>

  <script>
    // Ù†Ú¯Ø§Ø´Øª Ú©Ø§Ù…Ù„ â€” Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±Ú©Ø¨ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø¯Ù‚ÛŒÙ‚ ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
    const emojiMap = {
      // Ø­Ø±ÙˆÙ Ú©ÙˆÚ†Ú©
      'a': 'ğŸ˜€', 'b': 'ğŸ˜‚', 'c': 'ğŸ˜', 'd': 'ğŸ˜', 'e': 'ğŸ¤©', 'f': 'ğŸ˜­',
      'g': 'ğŸ˜¡', 'h': 'ğŸ¤¯', 'i': 'ğŸ¥¶', 'j': 'ğŸ˜±', 'k': 'ğŸ¥³', 'l': 'ğŸ˜´',
      'm': 'ğŸ¥±', 'n': 'ğŸ¤ ', 'o': 'ğŸ˜¤', 'p': 'ğŸ¤¢', 'q': 'ğŸ˜µ', 'r': 'ğŸ¤¡',
      's': 'ğŸ’©', 't': 'ğŸ‘»', 'u': 'ğŸ‘½', 'v': 'ğŸ¤–', 'w': 'ğŸ‘¾', 'x': 'ğŸ§ ',
      'y': 'ğŸ‘€', 'z': 'ğŸ‘',
      // Ø­Ø±ÙˆÙ Ø¨Ø²Ø±Ú¯
      'A': 'ğŸŒ', 'B': 'ğŸŒ™', 'C': 'â­', 'D': 'ğŸŒŸ', 'E': 'âœ¨', 'F': 'â˜„ï¸',
      'G': 'ğŸ”¥', 'H': 'ğŸ’§', 'I': 'â„ï¸', 'J': 'âš¡', 'K': 'ğŸŒˆ', 'L': 'â˜ï¸',
      'M': 'ğŸŒªï¸', 'N': 'ğŸŒ«ï¸', 'O': 'ğŸŒ‹', 'P': 'ğŸ”ï¸', 'Q': 'ğŸŒµ', 'R': 'ğŸŒ³',
      'S': 'ğŸŒŠ', 'T': 'ğŸ–ï¸', 'U': 'ğŸï¸', 'V': 'ğŸï¸', 'W': 'ğŸŒ ', 'X': 'ğŸŒŒ',
      'Y': 'ğŸŒ', 'Z': 'ğŸŒ',
      // Ø§Ø¹Ø¯Ø§Ø¯ (Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©ÛŒÙ¾Ø¯Ù‡Ø§ â€” Ù‡Ø± Ú©Ø¯Ø§Ù… ÛŒÚ© Ø±Ø´ØªÙ‡ Ú©Ø§Ù…Ù„ Ù‡Ø³ØªÙ†Ø¯!)
      '0': '0ï¸âƒ£',
      '1': '1ï¸âƒ£',
      '2': '2ï¸âƒ£',
      '3': '3ï¸âƒ£',
      '4': '4ï¸âƒ£',
      '5': '5ï¸âƒ£',
      '6': '6ï¸âƒ£',
      '7': '7ï¸âƒ£',
      '8': '8ï¸âƒ£',
      '9': '9ï¸âƒ£',
      // Ù†Ù…Ø§Ø¯Ù‡Ø§
      ' ': 'ğŸª',
      '.': 'ğŸª¨',
      ',': 'ğŸªµ',
      '!': 'ğŸ’¥',
      '?': 'â“',
      '-': 'â–',
      ':': 'ğŸ«§',
      '/': 'ğŸ«·',
      '@': 'âœ‰ï¸',
      '=': 'ğŸŸ°',
      '&': 'ğŸª¢',
      '#': 'ğŸ”¢',
      '%': 'ğŸ§®',
      '(': 'ğŸ§¾',
      ')': 'ğŸ”–',
      '+': 'â•'
    };

    // Ø³Ø§Ø®Øª reverseMap Ø¯Ù‚ÛŒÙ‚
    const reverseMap = {};
    for (const [char, emoji] of Object.entries(emojiMap)) {
      reverseMap[emoji] = char;
    }

    // Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ú©Ù„ÛŒØ¯Ù‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø·ÙˆÙ„ (Ù†Ø²ÙˆÙ„ÛŒ) â€” Ø¨Ø±Ø§ÛŒ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¯Ù‡ÛŒ Ø¨Ù‡ Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ù„Ù†Ø¯ØªØ±
    const sortedEmojiKeys = Object.keys(reverseMap).sort((a, b) => b.length - a.length);

    function encodeToEmoji() {
      const input = document.getElementById('input').value;
      let output = '';
      for (let char of input) {
        output += emojiMap[char] || char;
      }
      document.getElementById('output').value = output;
    }

    function decodeFromEmoji() {
      const input = document.getElementById('input').value;
      let output = '';
      let i = 0;
      while (i < input.length) {
        let matched = false;
        // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø² Ø¨Ù„Ù†Ø¯ØªØ±ÛŒÙ† Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ø¨Ù‡ Ú©ÙˆØªØ§Ù‡â€ŒØªØ±ÛŒÙ†
        for (const emoji of sortedEmojiKeys) {
          if (input.startsWith(emoji, i)) {
            output += reverseMap[emoji];
            i += emoji.length;
            matched = true;
            break;
          }
        }
        if (!matched) {
          output += input[i];
          i++;
        }
      }
      document.getElementById('output').value = output;
    }

    async function copyToClipboard() {
      const output = document.getElementById('output');
      if (!output.value) {
        showCopyFeedback('Ø®Ø±ÙˆØ¬ÛŒ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª!', false);
        return;
      }
      try {
        await navigator.clipboard.writeText(output.value);
        showCopyFeedback('Ú©Ù¾ÛŒ Ø´Ø¯!', true);
      } catch (err) {
        showCopyFeedback('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ!', false);
      }
    }

    function showCopyFeedback(text, isSuccess = true) {
      const feedback = document.getElementById('copyFeedback');
      feedback.textContent = text;
      feedback.style.background = isSuccess ? '#4caf50' : '#f44336';
      feedback.classList.add('show');
      setTimeout(() => feedback.classList.remove('show'), 2000);
    }

    function toggleTheme() {
      const current = document.documentElement.getAttribute('data-theme');
      if (current === 'dark') {
        document.documentElement.removeAttribute('data-theme');
      } else {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    }
  </script>
</body>
</html>